### TD

TD序列也就是大家常见的神奇九转，TD组合比神奇九转更复杂，而**GFTD模型是以TD组合为原型，进一步优化下的成果** 

#### GFTDV2模型

买入启动：连续4个K线,每个K线比T-4根K线的收盘价低
计数， 任意K线位置上同时满足:
① 收盘价大于或等于之前第2根K线最高价；
② 最高价大于之前第1根K线的最高价
③ 收盘价大于之前第1个计数的收盘价。 三个条件满足则计数加1
当买入计数为4时发出买入信号,买入信号发出之前若形成新的买入启动则重新开始计数,卖出信号类似之,同时辅以止损机制

#### 参数说明

n1为模型买入启动或卖出启动形态形成时的价格比较滞后期数
n2为模型买入启动或卖出启动形态形成的价格关系单向连续个数
n3为模型计数阶段的最终信号发出所需的计数值

三个参数默认值分别是4、4、4。
udi为第i根K线的价格关系比较结果，当收盘价大于T−n1日收盘价时 取值为1，小于T−n1日收盘价时取值为-1，否则为0：

$$
{ud_i} = 
\begin{cases} 
1 & \text{if } {c_i} > {c_{i-{n_1}}}, \\
-1 & \text{if } {c_i} < {c_{i-{n_1}}}, \\
0 & \text{else }
\end{cases}
$$

#### 计算步骤：

1. 计算 ${ud_i}$，i = 1, 2, 3 ... n
2. 累加 ${ud_i}$ 记为 ${count_i}$ ，当 ${ud_i}$ 值与 ${ud_{i-1}}$ 不等时，停止本次累加
3. 若 ${count_i}$ 为${n_2}$时为一个卖出启动的形成，当计算结果为${-n_2}$时 为一个买入启动的形成
4. 于买入启动形成的随后1根K线位置开始买入计数，在某一个K线上同时满足如下三个条件时买入计数累加1，当计数累加至${n_3}$发出买入信号

   1. 收盘价大于或等于之前第2根K线最高价
   2. 最高价大于之前第1根K线的最高价
   3. 收盘价大于之前第1个计数的收盘价
5. 于卖出启动形成的随后1根K线位置开始卖出计数，在某一个K线上同时满足如下三个条件时卖出计数累加1，当计数累加至${n_3}$发出卖出信号

   1. 收盘价小于或等于之前第2根K线最低价
   2. 最低价小于之前第1根K线的最低价
   3. 收盘价小于之前第1个计数的收盘价
6. 当形成一组新的买入启动时，取消上一组未最终形成买入信号的买入计数
7. 当形成一组新的卖出启动时，取消上一组未最终形成卖出信号的卖出计数

#### TDV2止损机制

采用动态幅度止损方式：每次买入或沽空时，止损点位为产生该信号的相应计数的形成周期内的市场最高点或者最低点，若当前是买入信号，买入计数过程中的市场最低点为止损点，若当前是卖出信号，卖出计数的形成过程中的市场最高点为止损点，在市场未触及止损点之前，一直持有头寸，直到出现反向信号或者被迫止损为止。

#### 计数取消机制

所谓计数取消机制指的是当新的买入启动形成后对原有未到达计数4的正在计数过程中的买入计数全部清零，再重最新买入启动后面开始新的计数，当新的卖出启动形成后对原有未达到计数4的正在计数过程中的卖出计数全部清零，再最新卖出启动后面开始新的计数

#### 参考文献

[广发证券：A股量化择时模型GFTD第二版](https://www.docin.com/p-923788773.html)